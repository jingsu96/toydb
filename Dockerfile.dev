# Simple Dockerfile for development
FROM golang:1.21-alpine

# Set working directory
WORKDIR /app

# Copy go.mod first
COPY go.mod ./
RUN test -f go.sum && cp go.sum . || echo "go.sum not found, continuing without it"

# Download dependencies
RUN go mod download

# Copy source code
COPY . .

RUN go fmt ./...
RUN go build -o main .
RUN go test -v ./...

# Build and run the application
CMD ["./main"]
